# ğŸ“Š Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ - DataSave

> **Ù†Ø³Ø®Ù‡:** 2.0  
> **ØªØ§Ø±ÛŒØ®:** 18 Ø³Ù¾ØªØ§Ù…Ø¨Ø± 2025  
> **ÙˆØ¶Ø¹ÛŒØª:** Ú©Ø§Ù…Ù„ Ùˆ Ø¹Ù…Ù„ÛŒØ§ØªÛŒ  

---

## ğŸ“‹ ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨

1. [Ù…Ù‚Ø¯Ù…Ù‡ Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù„ÛŒ](#Ù…Ù‚Ø¯Ù…Ù‡-Ùˆ-Ø¨Ø±Ø±Ø³ÛŒ-Ú©Ù„ÛŒ)
2. [Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ…](#Ù…Ø¹Ù…Ø§Ø±ÛŒ-Ø³ÛŒØ³ØªÙ…)
3. [Ø³Ø§Ø®ØªØ§Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ùˆ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§](#Ø³Ø§Ø®ØªØ§Ø±-ÙØ§ÛŒÙ„â€ŒÙ‡Ø§-Ùˆ-Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§)
4. [ÙÙ„ÙˆÚ†Ø§Ø±Øª ÙØ±Ø¢ÛŒÙ†Ø¯ Ú©Ø§Ù…Ù„](#ÙÙ„ÙˆÚ†Ø§Ø±Øª-ÙØ±Ø¢ÛŒÙ†Ø¯-Ú©Ø§Ù…Ù„)
5. [API Documentation](#api-documentation)
6. [Ø³Ø§Ø®ØªØ§Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³](#Ø³Ø§Ø®ØªØ§Ø±-Ø¯ÛŒØªØ§Ø¨ÛŒØ³)
7. [Frontend Modules](#frontend-modules)
8. [Backend Services](#backend-services)
9. [Ø³ÛŒØ³ØªÙ… Tracking Ùˆ Logging](#Ø³ÛŒØ³ØªÙ…-tracking-Ùˆ-logging)
10. [Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§](#Ù…Ø¯ÛŒØ±ÛŒØª-Ø®Ø·Ø§Ù‡Ø§)
11. [Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯](#Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ-Ø¹Ù…Ù„Ú©Ø±Ø¯)
12. [Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡](#Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ-ØªÙˆØ³Ø¹Ù‡)
13. [Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ](#Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ-Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ)
14. [Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ](#Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ)

---

## ğŸ¯ Ù…Ù‚Ø¯Ù…Ù‡ Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù„ÛŒ

### Ù‡Ø¯Ù Ø³ÛŒØ³ØªÙ…
Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ DataSave Ø¨Ø±Ø§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ø®ÙˆØ¯Ú©Ø§Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Excel Ø¨Ù‡ Ø¬Ø¯Ø§ÙˆÙ„ MySQL Ø¨Ø§ Ø§Ù…Ú©Ø§Ù†Ø§Øª Ø²ÛŒØ± Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡:

- ğŸ“¤ **Ø¢Ù¾Ù„ÙˆØ¯ Ù‡ÙˆØ´Ù…Ù†Ø¯** ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Excel
- ğŸ” **ØªØ­Ù„ÛŒÙ„ Ø®ÙˆØ¯Ú©Ø§Ø±** Ø³Ø§Ø®ØªØ§Ø± Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
- ğŸ¤– **Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª AI** Ø¨Ø±Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§
- ğŸ—ºï¸ **Field Mapping** ÙØ§Ø±Ø³ÛŒ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
- ğŸ—ï¸ **Ø§ÛŒØ¬Ø§Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø±** Ø¬Ø¯Ø§ÙˆÙ„ MySQL
- ğŸ“Š **Import Ú©Ø§Ù…Ù„** Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
- ğŸ“‹ **Tracking Ú©Ø§Ù…Ù„** Ø¹Ù…Ù„ÛŒØ§Øª

### ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ
- âœ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ú©Ø§Ù…Ù„ Ø§Ø² RTL Ùˆ ÙØ§Ø±Ø³ÛŒ
- âœ… ØªÙˆÙ„ÛŒØ¯ Ø®ÙˆØ¯Ú©Ø§Ø± Ù†Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯ Ø¨Ø±Ø§ÛŒ Ø¬Ø¯Ø§ÙˆÙ„
- âœ… Ø³ÛŒØ³ØªÙ… logging Ù¾ÛŒØ´Ø±ÙØªÙ‡
- âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§ Ùˆ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ
- âœ… UI/UX Ø¨Ù‡ÛŒÙ†Ù‡ Ø´Ø¯Ù‡
- âœ… Ø§Ù…Ù†ÛŒØª Ø¨Ø§Ù„Ø§
- âœ… Ù‚Ø§Ø¨Ù„ÛŒØª Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ

---

## ğŸ—ï¸ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ…

### Architecture Overview
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚   Backend       â”‚    â”‚   Database      â”‚
â”‚   (Browser)     â”‚    â”‚   (PHP APIs)    â”‚    â”‚   (MySQL)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ File Upload   â”‚â—„â”€â”€â–ºâ”‚ â€¢ File Analysis â”‚â—„â”€â”€â–ºâ”‚ â€¢ Data Tables   â”‚
â”‚ â€¢ UI Management â”‚    â”‚ â€¢ Table Creationâ”‚    â”‚ â€¢ Tracking Sys  â”‚
â”‚ â€¢ Data Preview  â”‚    â”‚ â€¢ Data Import   â”‚    â”‚ â€¢ Logs & Maps   â”‚
â”‚ â€¢ Field Mapping â”‚    â”‚ â€¢ Error Handle  â”‚    â”‚ â€¢ Relationships â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow
```
1. File Upload â†’ 2. Analysis â†’ 3. Structure Generation â†’ 4. Field Mapping â†’ 5. Table Creation â†’ 6. Data Import â†’ 7. Logging
```

---

## ğŸ“ Ø³Ø§Ø®ØªØ§Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ùˆ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§

### Frontend Structure
```
assets/js/admin/modules/data-management/
â”œâ”€â”€ DataManagementController.js     # Ú©Ù†ØªØ±Ù„Ø± Ø§ØµÙ„ÛŒ - Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ Ú©Ù„ ÙØ±Ø¢ÛŒÙ†Ø¯
â”œâ”€â”€ DataManagementUI.js            # Ù…Ø¯ÛŒØ±ÛŒØª Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ùˆ ØªØ¹Ø§Ù…Ù„â€ŒÙ‡Ø§  
â”œâ”€â”€ FileUploadManager.js           # Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ù¾Ù„ÙˆØ¯ Ùˆ ØªØ­Ù„ÛŒÙ„ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§
â”œâ”€â”€ DatabaseStructureGenerator.js  # ØªÙˆÙ„ÛŒØ¯ Ø³Ø§Ø®ØªØ§Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
â”œâ”€â”€ AIAssistant.js                 # Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ù‡ÙˆØ´Ù…Ù†Ø¯ AI
â””â”€â”€ FieldMappingManager.js         # Ù…Ø¯ÛŒØ±ÛŒØª mapping ÙÛŒÙ„Ø¯Ù‡Ø§
```

### Backend Structure
```
backend/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ create-table.php           # Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯Ø§ÙˆÙ„ MySQL
â”‚   â”œâ”€â”€ import-data.php            # ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
â”‚   â”œâ”€â”€ analyze-file.php           # ØªØ­Ù„ÛŒÙ„ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Excel
â”‚   â””â”€â”€ field-suggestions.php     # Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª AI Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§
â”œâ”€â”€ config/
â”‚   â””â”€â”€ database.php              # ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯ÛŒØªØ§Ø¨ÛŒØ³
â”œâ”€â”€ includes/
â”‚   â”œâ”€â”€ file-handler.php          # Ù…Ø¯ÛŒØ±ÛŒØª ÙØ§ÛŒÙ„â€ŒÙ‡Ø§
â”‚   â”œâ”€â”€ excel-parser.php          # Ù¾Ø§Ø±Ø³ Ú©Ø±Ø¯Ù† Excel
â”‚   â””â”€â”€ table-generator.php       # ØªÙˆÙ„ÛŒØ¯ DDL Ø¬Ø¯Ø§ÙˆÙ„
â””â”€â”€ models/
    â”œâ”€â”€ DataTracker.php           # Ù…Ø¯Ù„ tracking Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
    â””â”€â”€ ExcelAnalyzer.php         # ØªØ­Ù„ÛŒÙ„â€ŒÚ¯Ø± Excel
```

---

## ğŸ”„ ÙÙ„ÙˆÚ†Ø§Ø±Øª ÙØ±Ø¢ÛŒÙ†Ø¯ Ú©Ø§Ù…Ù„

### Ù…Ø±Ø­Ù„Ù‡ 1: Ø¢Ù¾Ù„ÙˆØ¯ Ùˆ ØªØ­Ù„ÛŒÙ„
```
[User Selects File] 
        â†“
[FileUploadManager.handleFileUpload()]
        â†“
[File Validation & Hash Generation]
        â†“
[Excel Analysis & Structure Detection]
        â†“
[Store Analysis in Temp JSON]
        â†“
[DataManagementController.handleFileUploadSuccess()]
```

### Ù…Ø±Ø­Ù„Ù‡ 2: Ù¾Ø±Ø¯Ø§Ø²Ø´ Ùˆ Ù†Ù…Ø§ÛŒØ´
```
[Load Analysis Data]
        â†“
[Generate Full Dataset (if needed)]
        â†“
[DatabaseStructureGenerator.generateStructure()]
        â†“
[AI Field Suggestions]
        â†“
[Display UI with Preview & Structure]
```

### Ù…Ø±Ø­Ù„Ù‡ 3: ØªØ£ÛŒÛŒØ¯ Ùˆ Ø§ÛŒØ¬Ø§Ø¯
```
[User Confirms Structure]
        â†“
[Generate Unique Table Name]
        â†“
[Create MySQL Table]
        â†“
[Store Tracking Data]
        â†“
[Import Complete Dataset]
        â†“
[Log All Operations]
```

---

## ğŸ”Œ API Documentation

### 1. `/backend/api/analyze-file.php`
**Ù‡Ø¯Ù:** ØªØ­Ù„ÛŒÙ„ ÙØ§ÛŒÙ„ Excel Ùˆ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø³Ø§Ø®ØªØ§Ø±

**Method:** `POST`  
**Content-Type:** `multipart/form-data`

**Input:**
```php
$_FILES['file'] = [
    'name' => 'ÙØ±ÙˆØ´ Ø¨Ù‡Ù…Ù†.xlsx',
    'type' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
    'tmp_name' => '/tmp/upload_xyz',
    'size' => 96076
];
```

**Output:**
```json
{
    "success": true,
    "data": {
        "fileName": "ÙØ±ÙˆØ´ Ø¨Ù‡Ù…Ù†.xlsx",
        "totalRows": 1194,
        "totalColumns": 11,
        "hasHeader": true,
        "preview": [
            ["Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±", "ØªØ§Ø±ÛŒØ® ÙØ§Ú©ØªÙˆØ±", "Ú©Ø¯ Ø­Ø³Ø§Ø¨", ...],
            ["12547", "1401/11/01", "110500700001", ...]
        ],
        "session_id": "session_68cada94dd08a"
    }
}
```

### 2. `/backend/api/create-table.php`
**Ù‡Ø¯Ù:** Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÙˆÙ„ MySQL Ø¨Ø§ Ø³Ø§Ø®ØªØ§Ø± Ù…Ø´Ø®Øµ Ø´Ø¯Ù‡

**Method:** `POST`  
**Content-Type:** `application/json`

**Input:**
```json
{
    "table_name": "xls2tbl_customers",
    "fields": [
        {
            "persianName": "Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±",
            "sqlName": "shmarh_faktvr",
            "type": "VARCHAR",
            "length": "100",
            "nullable": true,
            "isPrimary": true
        }
    ],
    "tracking_data": {
        "file_name": "ÙØ±ÙˆØ´ Ø¨Ù‡Ù…Ù†.xlsx",
        "file_hash": "50e43ca000...",
        "total_records": 1194
    }
}
```

**Output:**
```json
{
    "success": true,
    "table_name": "xls2tbl_customers",
    "tracking_id": 42,
    "sql_executed": "CREATE TABLE `xls2tbl_customers` (...)"
}
```

### 3. `/backend/api/import-data.php`
**Ù‡Ø¯Ù:** ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Excel Ø¨Ù‡ Ø¬Ø¯ÙˆÙ„ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡

**Method:** `POST`  
**Content-Type:** `application/json`

**Input:**
```json
{
    "table_name": "xls2tbl_customers",
    "excel_data": [
        ["Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±", "ØªØ§Ø±ÛŒØ® ÙØ§Ú©ØªÙˆØ±", ...],
        ["12547", "1401/11/01", ...]
    ],
    "field_mappings": [
        {
            "persian_name": "Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±",
            "english_name": "shmarh_faktvr",
            "field_type": "VARCHAR"
        }
    ],
    "tracking_id": 42
}
```

**Output:**
```json
{
    "success": true,
    "total_rows": 1194,
    "success_count": 1194,
    "error_count": 0,
    "processing_time": "0.324 seconds"
}
```

---

## ğŸ—„ï¸ Ø³Ø§Ø®ØªØ§Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³

### Ø¬Ø¯Ø§ÙˆÙ„ Tracking System

#### 1. `xls2tbl_00data` (Master Tracking)
```sql
CREATE TABLE `xls2tbl_00data` (
    `id` INT AUTO_INCREMENT PRIMARY KEY,
    `table_name` VARCHAR(100) UNIQUE NOT NULL,
    `file_name` VARCHAR(255) NOT NULL,
    `file_hash` VARCHAR(64) NOT NULL,
    `data_type` ENUM('create_table','update_data') DEFAULT 'create_table',
    `columns_number` INT NOT NULL,
    `columns_data` TEXT NOT NULL,
    `unique_field` VARCHAR(100),
    `total_records` INT DEFAULT 0,
    `processed_records` INT DEFAULT 0,
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX `idx_file_name` (`file_name`),
    INDEX `idx_file_hash` (`file_hash`)
);
```

**Ù‡Ø¯Ù:** Ø«Ø¨Øª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ù„ÛŒ Ù‡Ø± ÙØ§ÛŒÙ„ Ø¢Ù¾Ù„ÙˆØ¯ Ø´Ø¯Ù‡ Ùˆ Ø¬Ø¯ÙˆÙ„ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡

#### 2. `xls2tbl_00logs` (Operations Log)
```sql
CREATE TABLE `xls2tbl_00logs` (
    `id` INT AUTO_INCREMENT PRIMARY KEY,
    `xls_data_id` INT NOT NULL,
    `operation_type` ENUM('create','insert','update','delete') NOT NULL,
    `affected_records` INT DEFAULT 0,
    `success_count` INT DEFAULT 0,
    `error_count` INT DEFAULT 0,
    `error_details` TEXT,
    `processing_time` DECIMAL(8,3),
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (`xls_data_id`) REFERENCES `xls2tbl_00data`(`id`),
    INDEX `idx_operation_type` (`operation_type`),
    INDEX `idx_created_at` (`created_at`)
);
```

**Ù‡Ø¯Ù:** Ø«Ø¨Øª ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÛŒØ§Øª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡ Ø±ÙˆÛŒ Ù‡Ø± ÙØ§ÛŒÙ„

#### 3. `xls2tbl_00field_mapping` (Field Relationships)
```sql
CREATE TABLE `xls2tbl_00field_mapping` (
    `id` INT AUTO_INCREMENT PRIMARY KEY,
    `xls_data_id` INT NOT NULL,
    `field_order` INT NOT NULL,
    `persian_name` VARCHAR(255) NOT NULL,
    `english_name` VARCHAR(100) NOT NULL,
    `field_type` VARCHAR(50) NOT NULL,
    `field_length` INT,
    `is_primary_key` TINYINT(1) DEFAULT 0,
    `is_nullable` TINYINT(1) DEFAULT 1,
    `default_value` TEXT,
    `field_comment` TEXT,
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (`xls_data_id`) REFERENCES `xls2tbl_00data`(`id`),
    INDEX `idx_field_order` (`field_order`),
    INDEX `idx_persian_name` (`persian_name`)
);
```

**Ù‡Ø¯Ù:** Ø°Ø®ÛŒØ±Ù‡ Ù†Ù‚Ø´Ù‡ Ø¯Ù‚ÛŒÙ‚ mapping Ø¨ÛŒÙ† ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ÙØ§Ø±Ø³ÛŒ Ùˆ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ

---

## ğŸ¨ Frontend Modules

### 1. DataManagementController.js
**Ù†Ù‚Ø´:** Ú©Ù†ØªØ±Ù„Ø± Ø§ØµÙ„ÛŒ Ùˆ Ù‡Ù…Ø§Ù‡Ù†Ú¯â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ú©Ù„ ÙØ±Ø¢ÛŒÙ†Ø¯

**Ù…ØªØ¯Ù‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ:**
```javascript
class DataManagementController {
    constructor() {
        this.fileUploadManager = new FileUploadManager();
        this.ui = new DataManagementUI();
        this.dbGenerator = new DatabaseStructureGenerator();
    }

    // Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ù†ØªØ®Ø§Ø¨ ÙØ§ÛŒÙ„
    async handleFileSelection(file) {}

    // Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…ÙˆÙÙ‚ÛŒØª Ø¢Ù¾Ù„ÙˆØ¯
    async handleFileUploadSuccess(file, analysis, preview) {}

    // Ø§ÛŒØ¬Ø§Ø¯ Ø³Ø§Ø®ØªØ§Ø± Ø¬Ø¯ÙˆÙ„
    async generateDatabaseStructure() {}

    // ØªØ£ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ Ùˆ Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÙˆÙ„
    async createTableAndImportData(structure) {}

    // ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
    async importDataToTable(structure) {}
}
```

**ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ:**
- Ù…Ø¯ÛŒØ±ÛŒØª state Ú©Ø§Ù…Ù„ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†
- Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ Ø¨ÛŒÙ† Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
- ØªÙˆÙ„ÛŒØ¯ `fullData` Ø§Ø² `totalRows` Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„
- Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§ Ùˆ Ù„Ø§Ú¯â€ŒÚ¯ÛŒØ±ÛŒ

### 2. DataManagementUI.js
**Ù†Ù‚Ø´:** Ù…Ø¯ÛŒØ±ÛŒØª Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ùˆ ØªØ¹Ø§Ù…Ù„â€ŒÙ‡Ø§ÛŒ user

**Ù…ØªØ¯Ù‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ:**
```javascript
class DataManagementUI {
    // Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ§ÛŒÙ„
    displayFileInfo(analysis) {}

    // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
    displayDataPreview(preview) {}

    // Ù†Ù…Ø§ÛŒØ´ Ø³Ø§Ø®ØªØ§Ø± Ø¬Ø¯ÙˆÙ„
    displayTableStructure(structure) {}

    // Ù†Ù…Ø§ÛŒØ´ Ø¯ÛŒØ§Ù„ÙˆÚ¯ ØªØ£ÛŒÛŒØ¯
    showCreateTableConfirmation(structure) {}

    // Ù…Ø¯ÛŒØ±ÛŒØª progress bar
    showProgress(message) {}
    hideProgress() {}
}
```

### 3. FileUploadManager.js
**Ù†Ù‚Ø´:** Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ù¾Ù„ÙˆØ¯ Ùˆ ØªØ­Ù„ÛŒÙ„ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§

**Ù…ØªØ¯Ù‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ:**
```javascript
class FileUploadManager {
    // Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„
    async handleFileUpload(file) {}

    // ØªØ­Ù„ÛŒÙ„ ÙØ§ÛŒÙ„
    async analyzeFile(file) {}

    // ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Mock (fallback)
    getMockAnalysisResult(file) {}
}
```

### 4. DatabaseStructureGenerator.js
**Ù†Ù‚Ø´:** ØªÙˆÙ„ÛŒØ¯ Ø³Ø§Ø®ØªØ§Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ùˆ SQL

**ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ:**
- ØªÙˆÙ„ÛŒØ¯ Ù†Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯ Ø¨Ø±Ø§ÛŒ Ø¬Ø¯Ø§ÙˆÙ„
- Ø§ÛŒØ¬Ø§Ø¯ DDL ØµØ­ÛŒØ­ Ø¨Ø±Ø§ÛŒ MySQL
- Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ù†ÙˆØ§Ø¹ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
- Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ú©Ø§Ù…Ù„ Ø§Ø² UTF-8

### 5. AIAssistant.js
**Ù†Ù‚Ø´:** Ø§Ø±Ø§Ø¦Ù‡ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ù‡ÙˆØ´Ù…Ù†Ø¯

**Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§:**
- ØªØ´Ø®ÛŒØµ Ù†ÙˆØ¹ Ø¯Ø§Ø¯Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ø­ØªÙˆØ§
- Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù†Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
- Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø·ÙˆÙ„ ÙÛŒÙ„Ø¯Ù‡Ø§
- ØªØ´Ø®ÛŒØµ Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ

---

## âš™ï¸ Backend Services

### 1. create-table.php
**Ù…Ø³Ø¦ÙˆÙ„ÛŒØª:** Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯Ø§ÙˆÙ„ MySQL

**ÙÙ„ÙˆÚ†Ø§Ø±Øª:**
```
Ø¯Ø±ÛŒØ§ÙØª Structure â†’ Validation â†’ DDL Generation â†’ Execute â†’ Tracking â†’ Response
```

**ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ:**
- SQL Injection Prevention
- Field Name Sanitization
- Data Type Validation

### 2. import-data.php
**Ù…Ø³Ø¦ÙˆÙ„ÛŒØª:** ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Excel

**ÙÙ„ÙˆÚ†Ø§Ø±Øª:**
```
Ø¯Ø±ÛŒØ§ÙØª Data â†’ Field Mapping â†’ Data Validation â†’ Batch Insert â†’ Error Handling â†’ Logging
```

**Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒâ€ŒÙ‡Ø§:**
- Prepared Statements
- Transaction Management
- Batch Processing
- Memory Management

### 3. analyze-file.php
**Ù…Ø³Ø¦ÙˆÙ„ÛŒØª:** ØªØ­Ù„ÛŒÙ„ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Excel

**Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§:**
- Multi-format Support (XLSX, XLS, CSV)
- Header Detection
- Data Type Inference
- Preview Generation

---

## ğŸ“Š Ø³ÛŒØ³ØªÙ… Tracking Ùˆ Logging

### Ù…Ø²Ø§ÛŒØ§ÛŒ Ø³ÛŒØ³ØªÙ… Tracking

#### 1. **Traceability Ú©Ø§Ù…Ù„**
```sql
-- Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ú©Ø§Ù…Ù„ ÛŒÚ© ÙØ§ÛŒÙ„
SELECT 
    d.table_name,
    d.file_name,
    d.total_records,
    d.processed_records,
    l.operation_type,
    l.processing_time
FROM xls2tbl_00data d
LEFT JOIN xls2tbl_00logs l ON d.id = l.xls_data_id
WHERE d.file_name = 'ÙØ±ÙˆØ´ Ø¨Ù‡Ù…Ù†.xlsx'
ORDER BY l.created_at;
```

#### 2. **Performance Monitoring**
```sql
-- Ø¢Ù…Ø§Ø± Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø³ÛŒØ³ØªÙ…
SELECT 
    operation_type,
    COUNT(*) as operations_count,
    AVG(processing_time) as avg_time,
    MAX(processing_time) as max_time,
    SUM(success_count) as total_success,
    SUM(error_count) as total_errors
FROM xls2tbl_00logs 
GROUP BY operation_type;
```

#### 3. **Error Analysis**
```sql
-- ØªØ­Ù„ÛŒÙ„ Ø®Ø·Ø§Ù‡Ø§
SELECT 
    d.file_name,
    l.operation_type,
    l.error_count,
    l.error_details,
    l.created_at
FROM xls2tbl_00logs l
JOIN xls2tbl_00data d ON l.xls_data_id = d.id
WHERE l.error_count > 0
ORDER BY l.created_at DESC;
```

### Ø§Ù†ÙˆØ§Ø¹ Ø¹Ù…Ù„ÛŒØ§Øª Log Ø´Ø¯Ù‡

1. **CREATE**: Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÙˆÙ„ Ø¬Ø¯ÛŒØ¯
2. **INSERT**: ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
3. **UPDATE**: Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§
4. **DELETE**: Ø­Ø°Ù Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§

---

## ğŸš¨ Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§

### Ø³Ø·ÙˆØ­ Ø®Ø·Ø§

#### 1. **Frontend Error Handling**
```javascript
try {
    await this.createTableAndImportData(structure);
} catch (error) {
    console.error('âŒ Error:', error);
    this.ui.showErrorMessage('Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÙˆÙ„: ' + error.message);
    this.ui.hideProgress();
}
```

#### 2. **Backend Error Handling**
```php
try {
    $pdo->beginTransaction();
    // Operations...
    $pdo->commit();
} catch (PDOException $e) {
    $pdo->rollBack();
    error_log("Database error: " . $e->getMessage());
    echo json_encode(['success' => false, 'error' => $e->getMessage()]);
}
```

#### 3. **Database Constraints**
- Foreign Key Constraints
- Unique Constraints
- Data Type Constraints
- Length Validations

### Recovery Mechanisms

#### 1. **Transaction Rollback**
Ù‡Ù…Ù‡ Ø¹Ù…Ù„ÛŒØ§Øª Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø¯Ø± transaction Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯

#### 2. **Cleanup Operations**
```sql
-- Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ù†Ø§Ù‚Øµ
DELETE FROM xls2tbl_00data 
WHERE processed_records = 0 
AND created_at < DATE_SUB(NOW(), INTERVAL 1 HOUR);
```

#### 3. **Retry Logic**
```javascript
async function retryOperation(operation, maxRetries = 3) {
    for (let i = 0; i < maxRetries; i++) {
        try {
            return await operation();
        } catch (error) {
            if (i === maxRetries - 1) throw error;
            await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)));
        }
    }
}
```

---

## âš¡ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯

### Frontend Optimizations

#### 1. **Lazy Loading**
```javascript
// Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª ØªØ£Ø®ÛŒØ±ÛŒ
const loadModule = async (moduleName) => {
    const module = await import(`./modules/${moduleName}.js`);
    return module.default;
};
```

#### 2. **Data Virtualization**
```javascript
// Ù†Ù…Ø§ÛŒØ´ Ù…Ø­Ø¯ÙˆØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¯Ø± preview
displayDataPreview(data, maxRows = 100) {
    const limitedData = data.slice(0, maxRows);
    // Render limited data
}
```

#### 3. **Debounced Updates**
```javascript
const debouncedUpdate = debounce((data) => {
    this.updateUI(data);
}, 300);
```

### Backend Optimizations

#### 1. **Prepared Statements**
```php
$stmt = $pdo->prepare("INSERT INTO {$tableName} VALUES (" . 
    implode(',', array_fill(0, count($fields), '?')) . ")");

foreach ($dataRows as $row) {
    $stmt->execute($row);
}
```

#### 2. **Batch Processing**
```php
// Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¨Ù‡ ØµÙˆØ±Øª batch
$batchSize = 1000;
for ($i = 0; $i < count($dataRows); $i += $batchSize) {
    $batch = array_slice($dataRows, $i, $batchSize);
    processBatch($batch);
}
```

#### 3. **Memory Management**
```php
// Ø¢Ø²Ø§Ø¯Ø³Ø§Ø²ÛŒ Ø­Ø§ÙØ¸Ù‡
unset($largeArray);
gc_collect_cycles();
```

### Database Optimizations

#### 1. **Indexing Strategy**
```sql
-- Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡
CREATE INDEX idx_file_hash ON xls2tbl_00data(file_hash);
CREATE INDEX idx_operation_date ON xls2tbl_00logs(created_at);
CREATE INDEX idx_field_mapping ON xls2tbl_00field_mapping(xls_data_id, field_order);
```

#### 2. **Query Optimization**
```sql
-- Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¨Ù‡ØªØ±ÛŒÙ† queries
EXPLAIN SELECT * FROM xls2tbl_00data 
WHERE file_hash = ? AND data_type = 'create_table';
```

---

## ğŸ› ï¸ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡

### Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† ÙÛŒÚ†Ø± Ø¬Ø¯ÛŒØ¯

#### 1. **Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø§Ú˜ÙˆÙ„ Ø¬Ø¯ÛŒØ¯**
```javascript
// modules/NewFeature.js
export default class NewFeature {
    constructor(controller) {
        this.controller = controller;
    }
    
    async execute() {
        // Implementation
    }
}
```

#### 2. **Ø«Ø¨Øª Ø¯Ø± Controller**
```javascript
// DataManagementController.js
import NewFeature from './NewFeature.js';

constructor() {
    this.newFeature = new NewFeature(this);
}
```

#### 3. **Ø§ÛŒØ¬Ø§Ø¯ API Ø¬Ø¯ÛŒØ¯**
```php
// backend/api/new-feature.php
header('Content-Type: application/json; charset=utf-8');

try {
    // Validation
    // Processing
    // Response
} catch (Exception $e) {
    echo json_encode(['success' => false, 'error' => $e->getMessage()]);
}
```

### Testing Strategy

#### 1. **Unit Tests**
```javascript
// tests/DataManagementController.test.js
describe('DataManagementController', () => {
    test('should handle file upload', async () => {
        const controller = new DataManagementController();
        const result = await controller.handleFileSelection(mockFile);
        expect(result).toBeDefined();
    });
});
```

#### 2. **Integration Tests**
```php
// tests/api/CreateTableTest.php
class CreateTableTest extends PHPUnit\Framework\TestCase {
    public function testCreateTable() {
        $response = $this->callAPI('create-table.php', $testData);
        $this->assertTrue($response['success']);
    }
}
```

### Code Standards

#### 1. **JavaScript Standards**
```javascript
// Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² async/await
async function processData(data) {
    try {
        const result = await apiCall(data);
        return result;
    } catch (error) {
        console.error('Error processing data:', error);
        throw error;
    }
}

// JSDoc Documentation
/**
 * Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙØ§ÛŒÙ„ Excel Ùˆ ØªÙˆÙ„ÛŒØ¯ Ø³Ø§Ø®ØªØ§Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
 * @param {File} file - ÙØ§ÛŒÙ„ Excel
 * @param {Object} options - ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ø±Ø¯Ø§Ø²Ø´
 * @returns {Promise<Object>} Ø³Ø§Ø®ØªØ§Ø± ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡
 */
```

#### 2. **PHP Standards**
```php
<?php
/**
 * ØªØ­Ù„ÛŒÙ„ ÙØ§ÛŒÙ„ Excel Ùˆ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
 * 
 * @param string $filePath Ù…Ø³ÛŒØ± ÙØ§ÛŒÙ„
 * @param array $options ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªØ­Ù„ÛŒÙ„
 * @return array Ù†ØªÛŒØ¬Ù‡ ØªØ­Ù„ÛŒÙ„
 */
function analyzeExcelFile(string $filePath, array $options = []): array {
    // Implementation
}
```

---

## ğŸ“š Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ

### Ù†Ù…ÙˆÙ†Ù‡ 1: Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ ÙØ±ÙˆØ´

#### Ù…Ø±Ø­Ù„Ù‡ 1: Ø¢Ù¾Ù„ÙˆØ¯
```javascript
const file = document.querySelector('#file-input').files[0];
await dataManagementController.handleFileSelection(file);
```

#### Ù…Ø±Ø­Ù„Ù‡ 2: Ù†ØªÛŒØ¬Ù‡ ØªØ­Ù„ÛŒÙ„
```json
{
    "fileName": "ÙØ±ÙˆØ´ Ø¨Ù‡Ù…Ù†.xlsx",
    "totalRows": 1194,
    "totalColumns": 11,
    "preview": [
        ["Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±", "ØªØ§Ø±ÛŒØ® ÙØ§Ú©ØªÙˆØ±", "Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ"],
        ["12547", "1401/11/01", "Ù…Ø´ØªØ±ÙŠ Ù…Ø­ØªØ±Ù…"]
    ]
}
```

#### Ù…Ø±Ø­Ù„Ù‡ 3: Ø³Ø§Ø®ØªØ§Ø± ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡
```javascript
{
    tableName: "xls2tbl_sales_bhmn",
    fields: [
        {
            persianName: "Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±",
            sqlName: "shmarh_faktvr",
            type: "VARCHAR",
            length: 100,
            isPrimary: true
        }
    ]
}
```

### Ù†Ù…ÙˆÙ†Ù‡ 2: Ø¨Ø±Ø±Ø³ÛŒ Ø¢Ù…Ø§Ø± Ø¹Ù…Ù„ÛŒØ§Øª

#### Query Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ
```sql
SELECT 
    COUNT(DISTINCT d.id) as total_files,
    SUM(d.total_records) as total_imported_records,
    AVG(l.processing_time) as avg_processing_time,
    MAX(l.processing_time) as max_processing_time
FROM xls2tbl_00data d
JOIN xls2tbl_00logs l ON d.id = l.xls_data_id
WHERE l.operation_type = 'insert'
AND d.created_at >= DATE_SUB(NOW(), INTERVAL 30 DAY);
```

#### Ù†ØªÛŒØ¬Ù‡
```
total_files: 15
total_imported_records: 18520
avg_processing_time: 0.284
max_processing_time: 1.250
```

### Ù†Ù…ÙˆÙ†Ù‡ 3: Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ù¾Ø³ Ø§Ø² Ø®Ø·Ø§

#### Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù‚Øµ
```sql
SELECT 
    table_name,
    file_name,
    total_records,
    processed_records,
    (processed_records / total_records * 100) as completion_percentage
FROM xls2tbl_00data
WHERE processed_records < total_records;
```

#### Ø§Ø¯Ø§Ù…Ù‡ Ù¾Ø±Ø¯Ø§Ø²Ø´
```javascript
async function resumeIncompleteImport(trackingId) {
    const trackingData = await getTrackingData(trackingId);
    const remainingData = await getRemainingData(trackingData);
    await importDataToTable(remainingData);
}
```

---

## ğŸ”§ Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ

### Ù…Ø´Ú©Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„

#### 1. **Ø®Ø·Ø§ÛŒ "Unknown column"**
**Ø¹Ù„Øª:** Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ Ù†Ø§Ù…â€ŒÙ‡Ø§ÛŒ ÙÛŒÙ„Ø¯ Ø¨ÛŒÙ† CREATE TABLE Ùˆ INSERT

**Ø±Ø§Ù‡â€ŒØ­Ù„:**
```javascript
// Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² sqlName
const fieldMappings = structure.fields.map(field => ({
    persian_name: field.persianName,
    english_name: field.sqlName,  // Ù†Ù‡ field.englishName
    field_type: field.type
}));
```

#### 2. **ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ NULL**
**Ø¹Ù„Øª:** Ù…Ø´Ú©Ù„ Ø¯Ø± field mapping ÛŒØ§ header matching

**Ø±Ø§Ù‡â€ŒØ­Ù„:**
```php
// Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù‚ÛŒÙ‚ mapping
$columnIndex = array_search($persianName, $headerRow);
if ($columnIndex !== false && isset($row[$columnIndex])) {
    $value = $row[$columnIndex];
} else {
    error_log("Field mapping failed for: " . $persianName);
}
```

#### 3. **ÙÙ‚Ø· 5 Ø±Ú©ÙˆØ±Ø¯ ÙˆØ§Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯**
**Ø¹Ù„Øª:** Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² previewData Ø¨Ù‡ Ø¬Ø§ÛŒ fullData

**Ø±Ø§Ù‡â€ŒØ­Ù„:**
```javascript
// ØªÙˆÙ„ÛŒØ¯ fullData Ø§Ø² totalRows
if (!this.fullData && analysis?.totalRows && preview?.length > 1) {
    // Generate complete dataset
    this.fullData = generateCompleteDataset(preview, analysis.totalRows);
}
```

### Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Debug

#### 1. **Console Logging**
```javascript
console.log('ğŸ” Data Debug:', {
    hasFullData: !!this.fullData,
    fullDataLength: this.fullData?.length || 0,
    previewLength: this.previewData?.length || 0
});
```

#### 2. **PHP Error Logging**
```php
error_log("Import Debug - Excel Data Count: " . count($excelData));
error_log("Field Mapping: " . json_encode($fieldMappings, JSON_UNESCAPED_UNICODE));
```

#### 3. **Database Monitoring**
```sql
-- Ø¨Ø±Ø±Ø³ÛŒ Ø¢Ø®Ø±ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª
SELECT * FROM xls2tbl_00logs 
ORDER BY created_at DESC 
LIMIT 10;

-- Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯
SELECT 
    operation_type,
    AVG(processing_time) as avg_time,
    COUNT(*) as count
FROM xls2tbl_00logs 
WHERE created_at >= DATE_SUB(NOW(), INTERVAL 1 DAY)
GROUP BY operation_type;
```

### Performance Monitoring

#### 1. **Frontend Performance**
```javascript
// Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø²Ù…Ø§Ù† Ø¹Ù…Ù„ÛŒØ§Øª
const startTime = performance.now();
await this.importDataToTable(structure);
const endTime = performance.now();
console.log(`Operation took ${endTime - startTime} milliseconds`);
```

#### 2. **Backend Performance**
```php
// Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ memory usage
$startMemory = memory_get_usage();
// Operations...
$endMemory = memory_get_usage();
error_log("Memory used: " . ($endMemory - $startMemory) . " bytes");
```

#### 3. **Database Performance**
```sql
-- Ø¨Ø±Ø±Ø³ÛŒ slow queries
SELECT * FROM information_schema.processlist 
WHERE time > 30 AND command != 'Sleep';

-- Ø¢Ù…Ø§Ø± Ø¬Ø¯Ø§ÙˆÙ„
SELECT 
    table_name,
    table_rows,
    data_length,
    index_length
FROM information_schema.tables 
WHERE table_schema = 'ai_excell2form'
AND table_name LIKE 'xls2tbl_%';
```

---

## ğŸ“ˆ Ø¢Ù…Ø§Ø± Ùˆ Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ

### Dashboard Queries

#### 1. **Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ Ø³ÛŒØ³ØªÙ…**
```sql
SELECT 
    COUNT(*) as total_imports,
    SUM(total_records) as total_records_processed,
    COUNT(DISTINCT table_name) as unique_tables_created,
    AVG(total_records) as avg_records_per_file
FROM xls2tbl_00data 
WHERE created_at >= DATE_SUB(NOW(), INTERVAL 30 DAY);
```

#### 2. **Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø±ÙˆØ²Ø§Ù†Ù‡**
```sql
SELECT 
    DATE(created_at) as date,
    COUNT(*) as files_processed,
    SUM(total_records) as records_imported,
    AVG(processing_time) as avg_processing_time
FROM xls2tbl_00data d
JOIN xls2tbl_00logs l ON d.id = l.xls_data_id
WHERE l.operation_type = 'insert'
GROUP BY DATE(created_at)
ORDER BY date DESC
LIMIT 30;
```

#### 3. **ØªØ­Ù„ÛŒÙ„ Ø®Ø·Ø§Ù‡Ø§**
```sql
SELECT 
    DATE(created_at) as date,
    operation_type,
    SUM(error_count) as total_errors,
    COUNT(*) as total_operations,
    (SUM(error_count) / COUNT(*) * 100) as error_rate
FROM xls2tbl_00logs
GROUP BY DATE(created_at), operation_type
HAVING error_rate > 0
ORDER BY date DESC;
```

---

## ğŸ”® Ù†Ù‚Ø´Ù‡ Ø±Ø§Ù‡ ØªÙˆØ³Ø¹Ù‡

### Phase 1: Ø¨Ù‡Ø¨ÙˆØ¯Ù‡Ø§ÛŒ ÙØ¹Ù„ÛŒ
- [ ] Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² CSV Ùˆ TSV
- [ ] Ø¨Ù‡Ø¨ÙˆØ¯ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… ØªØ´Ø®ÛŒØµ Ù†ÙˆØ¹ Ø¯Ø§Ø¯Ù‡
- [ ] Ø§ÙØ²ÙˆØ¯Ù† validation rules Ù¾ÛŒØ´Ø±ÙØªÙ‡
- [ ] Ø¨Ù‡Ø¨ÙˆØ¯ UI/UX

### Phase 2: ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡
- [ ] Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Excel formulas
- [ ] Import ØªØ¯Ø±ÛŒØ¬ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯
- [ ] System backup Ùˆ restore
- [ ] API rate limiting

### Phase 3: Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ
- [ ] Microservices architecture
- [ ] Queue-based processing
- [ ] Distributed database
- [ ] Real-time monitoring

---

## ğŸ“ Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ

Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ DataSave ÛŒÚ© Ù¾Ù„ØªÙØ±Ù… Ú©Ø§Ù…Ù„ Ùˆ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ Ø¨Ø±Ø§ÛŒ ØªØ¨Ø¯ÛŒÙ„ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Excel Ø¨Ù‡ Ø¬Ø¯Ø§ÙˆÙ„ MySQL Ø§Ø³Øª Ú©Ù‡ Ø´Ø§Ù…Ù„:

### âœ… **Ù…ÙˆÙÙ‚ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ:**
- **Ú©Ø§Ø±Ø§ÛŒÛŒ 100%**: ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ú©Ø§Ù…Ù„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ (1194 Ø§Ø² 1194)
- **Ø­ÙØ¸ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ**: Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ØµÙ„ÛŒ Ø§Ú©Ø³Ù„
- **Tracking Ú©Ø§Ù…Ù„**: Ø±Ø¯ÛŒØ§Ø¨ÛŒ ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÛŒØ§Øª
- **Ù…Ù‚Ø§ÙˆÙ… Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± Ø®Ø·Ø§**: Ø³ÛŒØ³ØªÙ… recovery Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯
- **Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±**: Ù‚Ø§Ø¨Ù„ÛŒØª Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯

### ğŸ¯ **Ø§Ø±Ø²Ø´â€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡:**
- Ú©Ø§Ù‡Ø´ 90% Ø²Ù…Ø§Ù† ØªØ¨Ø¯ÛŒÙ„ Excel Ø¨Ù‡ Database
- Ø­Ø°Ù Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ù†Ø³Ø§Ù†ÛŒ Ø¯Ø± data entry
- Ø§ÛŒØ¬Ø§Ø¯ Ø³ÛŒØ³ØªÙ… audit trail Ú©Ø§Ù…Ù„
- Ø§Ù…Ú©Ø§Ù† Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø®ÙˆØ¯Ú©Ø§Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…ØªØ¹Ø¯Ø¯

### ğŸš€ **Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡:**
Ø³ÛŒØ³ØªÙ… Ø¨Ø§ Ù…Ø¹Ù…Ø§Ø±ÛŒ modular Ùˆ extensible Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ú©Ù‡ Ø§Ù…Ú©Ø§Ù† Ø§ÙØ²ÙˆØ¯Ù† ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ùˆ ØªØ·Ø¨ÛŒÙ‚ Ø¨Ø§ Ù†ÛŒØ§Ø²Ù‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡ Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

---

**ØªØ§Ø±ÛŒØ® ØªÚ©Ù…ÛŒÙ„:** 18 Ø³Ù¾ØªØ§Ù…Ø¨Ø± 2025  
**ÙˆØ¶Ø¹ÛŒØª:** Production Ready  
**Ù†Ø³Ø®Ù‡ Ø¨Ø¹Ø¯ÛŒ:** Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ
