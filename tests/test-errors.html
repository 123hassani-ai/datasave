<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ø®Ø·Ø§Ù‡Ø§ÛŒ JavaScript - DataSave</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .test-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            margin-bottom: 20px;
        }
        .result-display {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            direction: ltr;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 8px;
        }
        .status-success { background-color: #28a745; }
        .status-warning { background-color: #ffc107; }
        .status-error { background-color: #dc3545; }
    </style>
</head>
<body>
    <div class="container">
        <div class="text-center mb-5">
            <h1 class="text-white mb-3">
                <i class="fas fa-bug me-3"></i>
                ØªØ³Øª Ø®Ø·Ø§Ù‡Ø§ÛŒ JavaScript
            </h1>
            <p class="text-white-50 mb-0">Ø¢Ø²Ù…Ø§ÛŒØ´ Ø³ÛŒØ³ØªÙ… Ú¯Ø±ÙØªÙ† Ùˆ Ø«Ø¨Øª Ø®Ø·Ø§Ù‡Ø§ÛŒ JavaScript Ø¯Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù„Ø§Ú¯</p>
        </div>

        <!-- ÙˆØ¶Ø¹ÛŒØª Ø³ÛŒØ³ØªÙ… -->
        <div class="test-container">
            <h2 class="text-primary mb-4">
                <i class="fas fa-info-circle me-2"></i>
                ÙˆØ¶Ø¹ÛŒØª Ø³ÛŒØ³ØªÙ… Ù„Ø§Ú¯â€ŒÚ¯ÛŒØ±ÛŒ
            </h2>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5>Logger Ù…Ø­Ù„ÛŒ</h5>
                            <span id="loggerStatus" class="status-indicator status-warning"></span>
                            <span id="loggerStatusText">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5>API Ø³Ø±ÙˆØ±</h5>
                            <span id="serverApiStatus" class="status-indicator status-warning"></span>
                            <span id="serverApiStatusText">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5>Ù¾ÙˆØ´Ù‡ Ù„Ø§Ú¯</h5>
                            <span id="logDirStatus" class="status-indicator status-warning"></span>
                            <span id="logDirStatusText">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù -->
        <div class="test-container">
            <h2 class="text-danger mb-4">
                <i class="fas fa-exclamation-triangle me-2"></i>
                ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø®Ø·Ø§ÛŒ JavaScript
            </h2>

            <div class="btn-group mb-3" role="group">
                <button class="btn btn-warning" onclick="testReferenceError()">
                    <i class="fas fa-times me-2"></i>
                    Ø®Ø·Ø§ÛŒ Ù…Ø±Ø¬Ø¹
                </button>
                <button class="btn btn-danger" onclick="testTypeError()">
                    <i class="fas fa-bug me-2"></i>
                    Ø®Ø·Ø§ÛŒ Ù†ÙˆØ¹
                </button>
                <button class="btn btn-dark" onclick="testSyntaxError()">
                    <i class="fas fa-code me-2"></i>
                    Ø®Ø·Ø§ÛŒ Ù†Ø­ÙˆÛŒ
                </button>
                <button class="btn btn-secondary" onclick="testCustomError()">
                    <i class="fas fa-cog me-2"></i>
                    Ø®Ø·Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ
                </button>
            </div>

            <div class="btn-group mb-3" role="group">
                <button class="btn btn-info" onclick="testPromiseRejection()">
                    <i class="fas fa-hourglass me-2"></i>
                    Promise Ø±Ø¯ Ø´Ø¯Ù‡
                </button>
                <button class="btn btn-success" onclick="testAsyncError()">
                    <i class="fas fa-sync me-2"></i>
                    Ø®Ø·Ø§ÛŒ Async
                </button>
                <button class="btn btn-primary" onclick="testMultipleErrors()">
                    <i class="fas fa-list me-2"></i>
                    Ø®Ø·Ø§Ù‡Ø§ÛŒ Ù…ØªØ¹Ø¯Ø¯
                </button>
                <button class="btn btn-outline-primary" onclick="testEarlyError()">
                    <i class="fas fa-clock me-2"></i>
                    Ø®Ø·Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
                </button>
            </div>

            <div id="errorResults" class="result-display">
Ù†ØªØ§ÛŒØ¬ ØªØ³Øªâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯...
            </div>
        </div>

        <!-- Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÙˆØ± -->
        <div class="test-container">
            <h2 class="text-success mb-4">
                <i class="fas fa-server me-2"></i>
                Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÙˆØ±
            </h2>

            <div class="btn-group mb-3" role="group">
                <button class="btn btn-success" onclick="checkServerLogs()">
                    <i class="fas fa-search me-2"></i>
                    Ø¨Ø±Ø±Ø³ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù„Ø§Ú¯
                </button>
                <button class="btn btn-info" onclick="getRecentErrors()">
                    <i class="fas fa-history me-2"></i>
                    Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø®ÛŒØ±
                </button>
                <button class="btn btn-warning" onclick="testServerConnection()">
                    <i class="fas fa-wifi me-2"></i>
                    ØªØ³Øª Ø§ØªØµØ§Ù„
                </button>
                <button class="btn btn-outline-danger" onclick="clearResults()">
                    <i class="fas fa-trash me-2"></i>
                    Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù†ØªØ§ÛŒØ¬
                </button>
            </div>

            <div id="serverResults" class="result-display">
Ù†ØªØ§ÛŒØ¬ Ø¨Ø±Ø±Ø³ÛŒ Ø³Ø±ÙˆØ± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯...
            </div>
        </div>
    </div>

    <!-- Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ… Ù„Ø§Ú¯â€ŒÚ¯ÛŒØ±ÛŒ -->
    <script src="assets/js/modules/logging.js"></script>
    
    <script>
        let testCounter = 0;

        // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø§ÙˆÙ„ÛŒÙ‡ Ø³ÛŒØ³ØªÙ…
        function checkSystemStatus() {
            // ÙˆØ¶Ø¹ÛŒØª Logger
            if (window.Logger && window.Logger.isInitialized) {
                document.getElementById('loggerStatus').className = 'status-indicator status-success';
                document.getElementById('loggerStatusText').textContent = 'Ø¢Ù…Ø§Ø¯Ù‡';
            } else if (window.Logger) {
                document.getElementById('loggerStatus').className = 'status-indicator status-warning';
                document.getElementById('loggerStatusText').textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ...';
            } else {
                document.getElementById('loggerStatus').className = 'status-indicator status-error';
                document.getElementById('loggerStatusText').textContent = 'Ø®Ø·Ø§';
            }

            // ØªØ³Øª API Ø³Ø±ÙˆØ±
            testServerAPI();
        }

        // ØªØ³Øª API Ø³Ø±ÙˆØ±
        async function testServerAPI() {
            try {
                const response = await fetch('./backend/api/v1/logging.php?action=stats', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    document.getElementById('serverApiStatus').className = 'status-indicator status-success';
                    document.getElementById('serverApiStatusText').textContent = 'ÙØ¹Ø§Ù„';
                    
                    // ØªØ³Øª Ù¾ÙˆØ´Ù‡ Ù„Ø§Ú¯
                    const result = await response.json();
                    if (result.success) {
                        document.getElementById('logDirStatus').className = 'status-indicator status-success';
                        document.getElementById('logDirStatusText').textContent = 'Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ';
                    }
                } else {
                    throw new Error(`Server responded with status: ${response.status}`);
                }
            } catch (error) {
                document.getElementById('serverApiStatus').className = 'status-indicator status-error';
                document.getElementById('serverApiStatusText').textContent = 'Ø®Ø·Ø§';
                document.getElementById('logDirStatus').className = 'status-indicator status-error';
                document.getElementById('logDirStatusText').textContent = 'ØºÛŒØ±Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ';
            }
        }

        // ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø®Ø·Ø§
        function testReferenceError() {
            try {
                // Ù…ØªØºÛŒØ± ØªØ¹Ø±ÛŒÙ Ù†Ø´Ø¯Ù‡
                console.log(undefinedVariable);
            } catch (error) {
                appendResult(`âœ… Ø®Ø·Ø§ÛŒ Ù…Ø±Ø¬Ø¹ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯: ${error.message}`);
            }
        }

        function testTypeError() {
            try {
                // ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ null Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ØªØ§Ø¨Ø¹
                null.someMethod();
            } catch (error) {
                appendResult(`âœ… Ø®Ø·Ø§ÛŒ Ù†ÙˆØ¹ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯: ${error.message}`);
            }
        }

        function testSyntaxError() {
            try {
                // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² eval Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø®Ø·Ø§ÛŒ Ù†Ø­ÙˆÛŒ
                eval('function test() { return }');
            } catch (error) {
                appendResult(`âœ… Ø®Ø·Ø§ÛŒ Ù†Ø­ÙˆÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯: ${error.message}`);
            }
        }

        function testCustomError() {
            const customError = new Error('Ø§ÛŒÙ† ÛŒÚ© Ø®Ø·Ø§ÛŒ ØªØ³ØªÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ø§Ø³Øª');
            customError.name = 'CustomTestError';
            
            // Ø§Ø±Ø³Ø§Ù„ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ù‡ Logger
            if (window.Logger) {
                Logger.error('Ø®Ø·Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ ØªØ³Øª', customError, {
                    test_type: 'custom_error',
                    counter: ++testCounter
                });
            }
            
            appendResult(`âœ… Ø®Ø·Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯`);
        }

        function testPromiseRejection() {
            // Promise Ø±Ø¯ Ø´Ø¯Ù‡ Ú©Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ø´Ø¯Ù‡
            Promise.reject(new Error('ØªØ³Øª Promise Ø±Ø¯ Ø´Ø¯Ù‡'));
            appendResult(`âœ… Promise Ø±Ø¯ Ø´Ø¯Ù‡ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯`);
        }

        async function testAsyncError() {
            try {
                await new Promise((resolve, reject) => {
                    setTimeout(() => {
                        reject(new Error('Ø®Ø·Ø§ÛŒ Async ØªØ³ØªÛŒ'));
                    }, 100);
                });
            } catch (error) {
                appendResult(`âœ… Ø®Ø·Ø§ÛŒ Async Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯: ${error.message}`);
            }
        }

        function testMultipleErrors() {
            appendResult(`ğŸ”„ Ø´Ø±ÙˆØ¹ ØªØ³Øª Ø®Ø·Ø§Ù‡Ø§ÛŒ Ù…ØªØ¹Ø¯Ø¯...`);
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ú†Ù†Ø¯ÛŒÙ† Ø®Ø·Ø§ Ù¾Ø´Øª Ø³Ø± Ù‡Ù…
            setTimeout(() => testReferenceError(), 100);
            setTimeout(() => testTypeError(), 200);
            setTimeout(() => testPromiseRejection(), 300);
            
            appendResult(`âœ… 3 Ø®Ø·Ø§ÛŒ Ù…ØªØ¹Ø¯Ø¯ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯`);
        }

        function testEarlyError() {
            // ØªØ³Øª Ø®Ø·Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ (Ù‚Ø¨Ù„ Ø§Ø² Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ø¯Ù† Ú©Ø§Ù…Ù„ Logger)
            if (window._pendingErrors) {
                window._pendingErrors.push({
                    type: 'error',
                    error: new Error('Ø®Ø·Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ØªØ³ØªÛŒ'),
                    message: 'ØªØ³Øª Ø®Ø·Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡',
                    timestamp: new Date().toISOString()
                });
                
                // Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…Ø¬Ø¯Ø¯ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ù…Ø¹Ù„Ù‚
                if (window.Logger && typeof Logger.processPendingErrors === 'function') {
                    Logger.processPendingErrors();
                }
                
                appendResult(`âœ… Ø®Ø·Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ØªØ³Øª Ø´Ø¯`);
            } else {
                appendResult(`âŒ Ø³ÛŒØ³ØªÙ… Ø®Ø·Ø§Ù‡Ø§ÛŒ Ù…Ø¹Ù„Ù‚ ÙØ¹Ø§Ù„ Ù†ÛŒØ³Øª`);
            }
        }

        async function checkServerLogs() {
            try {
                const response = await fetch('./backend/api/v1/logging.php?action=logs&limit=10&level=error');
                const result = await response.json();
                
                if (result.success && result.data) {
                    let output = `=== Ø¢Ø®Ø±ÛŒÙ† Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø¯Ø± Ø³Ø±ÙˆØ± ===\n\n`;
                    
                    if (result.data.length === 0) {
                        output += `Ù‡ÛŒÚ† Ø®Ø·Ø§ÛŒ Ø§Ø®ÛŒØ±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.\n`;
                    } else {
                        result.data.forEach((log, index) => {
                            output += `${index + 1}. [${log.timestamp}] ${log.message}\n`;
                            if (log.error) {
                                output += `   Ø®Ø·Ø§: ${JSON.stringify(log.error, null, 2)}\n`;
                            }
                            output += `${'â”€'.repeat(60)}\n`;
                        });
                    }
                    
                    document.getElementById('serverResults').textContent = output;
                } else {
                    throw new Error(result.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù„Ø§Ú¯â€ŒÙ‡Ø§');
                }
            } catch (error) {
                document.getElementById('serverResults').textContent = `Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÙˆØ±: ${error.message}`;
            }
        }

        async function getRecentErrors() {
            try {
                const response = await fetch('./backend/api/v1/logging.php?action=logs&level=error&limit=20');
                const result = await response.json();
                
                if (result.success) {
                    let output = `=== ${result.data.length} Ø®Ø·Ø§ÛŒ Ø§Ø®ÛŒØ± ===\n\n`;
                    
                    result.data.forEach((log, index) => {
                        const timestamp = log.timestamp || 'Ù†Ø§Ù…Ø´Ø®Øµ';
                        output += `${index + 1}. [${timestamp}] ${log.level}: ${log.message}\n`;
                        
                        if (log.data && Object.keys(log.data).length > 0) {
                            output += `   Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§: ${JSON.stringify(log.data, null, 2)}\n`;
                        }
                        
                        output += `${'â”€'.repeat(50)}\n`;
                    });
                    
                    document.getElementById('serverResults').textContent = output;
                } else {
                    throw new Error(result.message);
                }
            } catch (error) {
                document.getElementById('serverResults').textContent = `Ø®Ø·Ø§: ${error.message}`;
            }
        }

        async function testServerConnection() {
            appendResult(`ğŸ”„ ØªØ³Øª Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±...`);
            
            try {
                // Ø§Ø±Ø³Ø§Ù„ ÛŒÚ© Ù„Ø§Ú¯ ØªØ³Øª Ø¨Ù‡ Ø³Ø±ÙˆØ±
                const testLog = {
                    level: 'info',
                    message: 'ØªØ³Øª Ø§ØªØµØ§Ù„ Ø³Ø±ÙˆØ±',
                    data: {
                        test: true,
                        timestamp: new Date().toISOString()
                    }
                };
                
                const response = await fetch('./backend/api/v1/logging.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(testLog)
                });
                
                if (response.ok) {
                    appendResult(`âœ… Ø§ØªØµØ§Ù„ Ø³Ø±ÙˆØ± Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ²`);
                    document.getElementById('serverResults').textContent = 'Ø§ØªØµØ§Ù„ Ø¨Ø§ Ø³Ø±ÙˆØ± Ø¨Ø±Ù‚Ø±Ø§Ø± Ø§Ø³Øª Ùˆ Ù„Ø§Ú¯ ØªØ³Øª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.';
                } else {
                    throw new Error(`Server responded with status: ${response.status}`);
                }
            } catch (error) {
                appendResult(`âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø³Ø±ÙˆØ±: ${error.message}`);
            }
        }

        function clearResults() {
            document.getElementById('errorResults').textContent = 'Ù†ØªØ§ÛŒØ¬ Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯...';
            document.getElementById('serverResults').textContent = 'Ù†ØªØ§ÛŒØ¬ Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯...';
        }

        function appendResult(message) {
            const results = document.getElementById('errorResults');
            const timestamp = new Date().toLocaleTimeString('fa-IR');
            results.textContent += `[${timestamp}] ${message}\n`;
            results.scrollTop = results.scrollHeight;
        }

        // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', function() {
            // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø³ÛŒØ³ØªÙ…
            checkSystemStatus();
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ ÙˆØ¶Ø¹ÛŒØª
            setInterval(checkSystemStatus, 10000);
            
            // Ù„Ø§Ú¯ Ø¢ØºØ§Ø² ØªØ³Øª
            if (window.Logger) {
                Logger.info('ØµÙØ­Ù‡ ØªØ³Øª Ø®Ø·Ø§Ù‡Ø§ÛŒ JavaScript Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯', {
                    page: 'test-errors.html',
                    purpose: 'JavaScript error testing',
                    user_agent: navigator.userAgent
                });
            }
            
            appendResult('ğŸ¯ Ø³ÛŒØ³ØªÙ… ØªØ³Øª Ø®Ø·Ø§Ù‡Ø§ÛŒ JavaScript Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª');
        });

        // Ø±ØµØ¯ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø³Ø±Ø§Ø³Ø±ÛŒ
        const originalErrorHandler = window.onerror;
        window.onerror = function(message, source, lineno, colno, error) {
            appendResult(`ğŸš¨ Ø®Ø·Ø§ÛŒ Ú¯Ø±ÙØªÙ‡ Ø´Ø¯Ù‡: ${message} Ø¯Ø± Ø®Ø· ${lineno}`);
            
            if (originalErrorHandler) {
                return originalErrorHandler.apply(this, arguments);
            }
        };

        // Ø±ØµØ¯ Promise Ø±Ø¯ Ø´Ø¯Ù‡
        window.addEventListener('unhandledrejection', function(event) {
            appendResult(`ğŸš¨ Promise Ø±Ø¯ Ø´Ø¯Ù‡ Ú¯Ø±ÙØªÙ‡ Ø´Ø¯: ${event.reason}`);
        });
    </script>
</body>
</html>