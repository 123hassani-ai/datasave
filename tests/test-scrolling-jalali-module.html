<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تست کامل ماژول Scrolling Jalali Picker</title>
    
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- فونت وزیرمتن -->
    <link href="assets/fonts/vazirmatn.css" rel="stylesheet">
    
    <!-- ماژول اصلی -->
    <script src="assets/js/modules/scrolling-jalali-picker.js"></script>
    
    <style>
        body {
            font-family: 'Vazirmatn', Tahoma, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .demo-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            overflow-x: auto;
            direction: ltr;
            text-align: left;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-family: 'Vazirmatn', sans-serif;
            transition: all 0.3s ease;
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            font-family: 'Vazirmatn', sans-serif;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-secondary {
            background: #e2e8f0;
            color: #2d3748;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .config-section {
            margin-bottom: 30px;
        }
        
        .config-item {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #4a5568;
        }
        
        select, input[type="color"], input[type="range"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #e2e8f0;
            border-radius: 5px;
            font-family: 'Vazirmatn', sans-serif;
        }
        
        .demo-result {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .feature-badge {
            display: inline-block;
            background: #4299e1;
            color: white;
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 12px;
            margin: 2px;
        }
        
        .performance-meter {
            height: 20px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .performance-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            transition: width 0.5s ease;
        }
        
        .tabs {
            display: flex;
            background: #f7fafc;
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 20px;
        }
        
        .tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="min-h-screen py-8">
        <div class="container mx-auto px-4 max-w-7xl">
            
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-white mb-4">
                    🗓️ ماژول Scrolling Jalali Picker
                </h1>
                <p class="text-white/80 text-lg">
                    یک کتابخانه مدرن، کامل و قابل شخصی‌سازی برای انتخاب تاریخ شمسی
                </p>
                <div class="flex justify-center space-x-4 mt-4">
                    <span class="feature-badge">⚡ Performance</span>
                    <span class="feature-badge">🎨 Customizable</span>
                    <span class="feature-badge">📱 Responsive</span>
                    <span class="feature-badge">♿ Accessible</span>
                    <span class="feature-badge">🔧 Easy API</span>
                </div>
            </div>

            <!-- Navigation Tabs -->
            <div class="demo-card p-6 mb-8">
                <div class="tabs">
                    <div class="tab active" data-tab="basic">نمونه‌های پایه</div>
                    <div class="tab" data-tab="advanced">تنظیمات پیشرفته</div>
                    <div class="tab" data-tab="themes">تم‌ها و استایل‌ها</div>
                    <div class="tab" data-tab="api">API و متدها</div>
                    <div class="tab" data-tab="performance">تست عملکرد</div>
                </div>

                <!-- Basic Examples Tab -->
                <div class="tab-content active" id="basic">
                    <h2 class="text-2xl font-bold mb-6">نمونه‌های پایه</h2>
                    
                    <div class="feature-grid">
                        <!-- Default Picker -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">🔸 پیکر پیش‌فرض</h3>
                            <input type="text" id="default-picker" placeholder="کلیک کنید...">
                            <div class="code-block mt-4">
// استفاده ساده
const picker = new ScrollingJalaliPicker('#default-picker');
                            </div>
                        </div>

                        <!-- Small Size -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">🔸 اندازه کوچک</h3>
                            <input type="text" id="small-picker" placeholder="اندازه کوچک">
                            <div class="code-block mt-4">
// اندازه کوچک
const picker = new ScrollingJalaliPicker('#small-picker', {
    size: 'small'
});
                            </div>
                        </div>

                        <!-- Large Size -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">🔸 اندازه بزرگ</h3>
                            <input type="text" id="large-picker" placeholder="اندازه بزرگ">
                            <div class="code-block mt-4">
// اندازه بزرگ
const picker = new ScrollingJalaliPicker('#large-picker', {
    size: 'large'
});
                            </div>
                        </div>

                        <!-- With Custom Colors -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">🔸 رنگ‌های سفارشی</h3>
                            <input type="text" id="custom-color-picker" placeholder="رنگ‌های سفارشی">
                            <div class="code-block mt-4">
// رنگ‌های سفارشی
const picker = new ScrollingJalaliPicker('#custom-color-picker', {
    colors: {
        primary: '#e74c3c',
        secondary: '#c0392b'
    }
});
                            </div>
                        </div>

                        <!-- With Callbacks -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">🔸 با Callback</h3>
                            <input type="text" id="callback-picker" placeholder="با callback">
                            <div class="demo-result">
                                <strong>وضعیت:</strong> <span id="callback-status">منتظر انتخاب...</span>
                            </div>
                            <div class="code-block mt-4">
// با callback
const picker = new ScrollingJalaliPicker('#callback-picker', {
    onSelect: (date, persian, iso) => {
        console.log('انتخاب شد:', persian);
    }
});
                            </div>
                        </div>

                        <!-- Without Gregorian -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">🔸 بدون تاریخ میلادی</h3>
                            <input type="text" id="no-gregorian-picker" placeholder="فقط شمسی">
                            <div class="code-block mt-4">
// بدون نمایش میلادی
const picker = new ScrollingJalaliPicker('#no-gregorian-picker', {
    showGregorian: false
});
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Settings Tab -->
                <div class="tab-content" id="advanced">
                    <h2 class="text-2xl font-bold mb-6">تنظیمات پیشرفته</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Configuration Panel -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">⚙️ پنل تنظیمات</h3>
                            
                            <div class="config-section">
                                <div class="config-item">
                                    <label>اندازه:</label>
                                    <select id="config-size">
                                        <option value="small">کوچک</option>
                                        <option value="medium" selected>متوسط</option>
                                        <option value="large">بزرگ</option>
                                    </select>
                                </div>
                                
                                <div class="config-item">
                                    <label>رنگ اصلی:</label>
                                    <input type="color" id="config-primary-color" value="#667eea">
                                </div>
                                
                                <div class="config-item">
                                    <label>رنگ فرعی:</label>
                                    <input type="color" id="config-secondary-color" value="#764ba2">
                                </div>
                                
                                <div class="config-item">
                                    <label>انیمیشن:</label>
                                    <select id="config-animation">
                                        <option value="slideUp" selected>اسلاید بالا</option>
                                        <option value="slideDown">اسلاید پایین</option>
                                        <option value="fadeIn">محو شدن</option>
                                        <option value="scaleIn">بزرگ شدن</option>
                                    </select>
                                </div>
                                
                                <div class="config-item">
                                    <label>مدت زمان انیمیشن (ms):</label>
                                    <input type="range" id="config-animation-duration" min="100" max="1000" value="300">
                                    <span id="animation-duration-value">300ms</span>
                                </div>
                                
                                <div class="config-item">
                                    <label>حداقل سال:</label>
                                    <input type="number" id="config-min-year" value="1300" min="1200" max="1400">
                                </div>
                                
                                <div class="config-item">
                                    <label>حداکثر سال:</label>
                                    <input type="number" id="config-max-year" value="1500" min="1400" max="1600">
                                </div>
                                
                                <button class="btn btn-primary" id="apply-config">اعمال تنظیمات</button>
                            </div>
                        </div>
                        
                        <!-- Live Demo -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">🔴 پیش‌نمایش زنده</h3>
                            <input type="text" id="advanced-picker" placeholder="پیکر قابل تنظیم...">
                            <div class="demo-result">
                                <strong>تنظیمات فعلی:</strong>
                                <div id="current-config" class="code-block mt-2"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Themes Tab -->
                <div class="tab-content" id="themes">
                    <h2 class="text-2xl font-bold mb-6">تم‌ها و استایل‌ها</h2>
                    
                    <div class="feature-grid">
                        <!-- Modern Theme -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">🎨 تم مدرن (پیش‌فرض)</h3>
                            <input type="text" id="modern-theme" placeholder="تم مدرن">
                        </div>

                        <!-- Dark Theme -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">🌙 تم تیره</h3>
                            <input type="text" id="dark-theme" placeholder="تم تیره">
                        </div>

                        <!-- Minimal Theme -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">⚪ تم مینیمال</h3>
                            <input type="text" id="minimal-theme" placeholder="تم مینیمال">
                        </div>

                        <!-- Glass Theme -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">💎 تم شیشه‌ای</h3>
                            <input type="text" id="glass-theme" placeholder="تم شیشه‌ای">
                        </div>

                        <!-- Nature Theme -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">🌿 تم طبیعی</h3>
                            <input type="text" id="nature-theme" placeholder="تم طبیعی">
                        </div>

                        <!-- Sunset Theme -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">🌅 تم غروب</h3>
                            <input type="text" id="sunset-theme" placeholder="تم غروب">
                        </div>
                    </div>
                </div>

                <!-- API Tab -->
                <div class="tab-content" id="api">
                    <h2 class="text-2xl font-bold mb-6">API و متدها</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- API Methods -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">🔧 متدهای API</h3>
                            <input type="text" id="api-picker" placeholder="تست API">
                            
                            <div class="space-y-2 mt-4">
                                <button class="btn btn-primary w-full" onclick="testAPI('open')">باز کردن</button>
                                <button class="btn btn-primary w-full" onclick="testAPI('close')">بستن</button>
                                <button class="btn btn-primary w-full" onclick="testAPI('setToday')">تنظیم امروز</button>
                                <button class="btn btn-primary w-full" onclick="testAPI('setDate')">تنظیم تاریخ خاص</button>
                                <button class="btn btn-primary w-full" onclick="testAPI('getDate')">دریافت تاریخ</button>
                                <button class="btn btn-primary w-full" onclick="testAPI('clear')">پاک کردن</button>
                                <button class="btn btn-secondary w-full" onclick="testAPI('destroy')">حذف کامل</button>
                            </div>
                        </div>
                        
                        <!-- API Results -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">📊 نتایج API</h3>
                            <div id="api-results" class="demo-result min-h-96">
                                نتایج در اینجا نمایش داده می‌شود...
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Tab -->
                <div class="tab-content" id="performance">
                    <h2 class="text-2xl font-bold mb-6">تست عملکرد</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Performance Tests -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">⚡ تست‌های عملکرد</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label>تعداد picker برای تست:</label>
                                    <input type="number" id="picker-count" value="10" min="1" max="100">
                                </div>
                                
                                <button class="btn btn-primary w-full" onclick="runPerformanceTest()">
                                    🚀 شروع تست عملکرد
                                </button>
                                
                                <div id="performance-container"></div>
                            </div>
                        </div>
                        
                        <!-- Performance Results -->
                        <div class="demo-card p-6">
                            <h3 class="text-lg font-bold mb-4">📈 نتایج عملکرد</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label>زمان ایجاد (ms):</label>
                                    <div class="performance-meter">
                                        <div class="performance-fill" id="creation-time-fill" style="width: 0%"></div>
                                    </div>
                                    <span id="creation-time-text">0ms</span>
                                </div>
                                
                                <div>
                                    <label>مصرف حافظه (تخمینی KB):</label>
                                    <div class="performance-meter">
                                        <div class="performance-fill" id="memory-usage-fill" style="width: 0%"></div>
                                    </div>
                                    <span id="memory-usage-text">0KB</span>
                                </div>
                                
                                <div>
                                    <label>تعداد عناصر DOM:</label>
                                    <div class="performance-meter">
                                        <div class="performance-fill" id="dom-count-fill" style="width: 0%"></div>
                                    </div>
                                    <span id="dom-count-text">0</span>
                                </div>
                                
                                <div id="performance-log" class="demo-result max-h-60 overflow-y-auto"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="text-center text-white/80">
                <p class="mb-4">
                    ساخته شده با ❤️ برای پروژه DataSave
                </p>
                <div class="flex justify-center space-x-4">
                    <span class="text-sm">v1.0.0</span>
                    <span class="text-sm">|</span>
                    <span class="text-sm">MIT License</span>
                    <span class="text-sm">|</span>
                    <span class="text-sm">Persian Calendar</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // متغیرهای سراسری
        let pickers = {};
        let performanceResults = {};

        // مقداردهی اولیه
        document.addEventListener('DOMContentLoaded', function() {
            initTabs();
            initBasicPickers();
            initAdvancedPickers();
            initThemePickers();
            initAPIPicker();
            setupConfigHandlers();
        });

        // تب‌ها
        function initTabs() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.dataset.tab;
                    
                    // به روزرسانی تب‌ها
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // به روزرسانی محتوا
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(targetTab).classList.add('active');
                });
            });
        }

        // مقداردهی پیکرهای پایه
        function initBasicPickers() {
            // پیکر پیش‌فرض
            pickers.default = new ScrollingJalaliPicker('#default-picker');
            
            // پیکر کوچک
            pickers.small = new ScrollingJalaliPicker('#small-picker', {
                size: 'small'
            });
            
            // پیکر بزرگ
            pickers.large = new ScrollingJalaliPicker('#large-picker', {
                size: 'large'
            });
            
            // پیکر با رنگ سفارشی
            pickers.customColor = new ScrollingJalaliPicker('#custom-color-picker', {
                colors: {
                    primary: '#e74c3c',
                    secondary: '#c0392b'
                }
            });
            
            // پیکر با callback
            pickers.callback = new ScrollingJalaliPicker('#callback-picker', {
                onSelect: function(date, persian, iso) {
                    document.getElementById('callback-status').innerHTML = 
                        `انتخاب شد: <strong>${persian}</strong> (${iso})`;
                },
                onOpen: function() {
                    document.getElementById('callback-status').innerHTML = 
                        '<em style="color: #3498db;">پیکر باز شد...</em>';
                },
                onClose: function() {
                    document.getElementById('callback-status').innerHTML = 
                        '<em style="color: #95a5a6;">پیکر بسته شد</em>';
                }
            });
            
            // پیکر بدون میلادی
            pickers.noGregorian = new ScrollingJalaliPicker('#no-gregorian-picker', {
                showGregorian: false
            });
        }

        // مقداردهی پیکرهای پیشرفته
        function initAdvancedPickers() {
            pickers.advanced = new ScrollingJalaliPicker('#advanced-picker', {
                size: 'medium',
                colors: {
                    primary: '#667eea',
                    secondary: '#764ba2'
                }
            });
            
            updateCurrentConfig();
        }

        // مقداردهی پیکرهای تم
        function initThemePickers() {
            // تم مدرن
            pickers.modern = new ScrollingJalaliPicker('#modern-theme');
            
            // تم تیره
            pickers.dark = new ScrollingJalaliPicker('#dark-theme', {
                colors: {
                    primary: '#2c3e50',
                    secondary: '#34495e',
                    background: '#2c3e50',
                    text: '#ecf0f1',
                    textLight: '#bdc3c7'
                }
            });
            
            // تم مینیمال
            pickers.minimal = new ScrollingJalaliPicker('#minimal-theme', {
                colors: {
                    primary: '#95a5a6',
                    secondary: '#7f8c8d'
                },
                borderRadius: '5px',
                backdropBlur: false
            });
            
            // تم شیشه‌ای
            pickers.glass = new ScrollingJalaliPicker('#glass-theme', {
                colors: {
                    primary: 'rgba(102, 126, 234, 0.8)',
                    secondary: 'rgba(118, 75, 162, 0.8)',
                    background: 'rgba(255, 255, 255, 0.9)'
                },
                backdropBlur: true
            });
            
            // تم طبیعی
            pickers.nature = new ScrollingJalaliPicker('#nature-theme', {
                colors: {
                    primary: '#27ae60',
                    secondary: '#2ecc71'
                }
            });
            
            // تم غروب
            pickers.sunset = new ScrollingJalaliPicker('#sunset-theme', {
                colors: {
                    primary: '#f39c12',
                    secondary: '#e67e22'
                }
            });
        }

        // مقداردهی پیکر API
        function initAPIPicker() {
            pickers.api = new ScrollingJalaliPicker('#api-picker');
        }

        // تنظیم کنترل‌کننده‌های config
        function setupConfigHandlers() {
            document.getElementById('config-animation-duration').addEventListener('input', function() {
                document.getElementById('animation-duration-value').textContent = this.value + 'ms';
            });
            
            document.getElementById('apply-config').addEventListener('click', applyAdvancedConfig);
        }

        // اعمال تنظیمات پیشرفته
        function applyAdvancedConfig() {
            const config = {
                size: document.getElementById('config-size').value,
                colors: {
                    primary: document.getElementById('config-primary-color').value,
                    secondary: document.getElementById('config-secondary-color').value
                },
                animation: document.getElementById('config-animation').value,
                animationDuration: parseInt(document.getElementById('config-animation-duration').value),
                yearRange: {
                    min: parseInt(document.getElementById('config-min-year').value),
                    max: parseInt(document.getElementById('config-max-year').value)
                }
            };
            
            // حذف پیکر قدیمی
            if (pickers.advanced) {
                pickers.advanced.destroy();
            }
            
            // ایجاد پیکر جدید با تنظیمات جدید
            pickers.advanced = new ScrollingJalaliPicker('#advanced-picker', config);
            
            updateCurrentConfig();
        }

        // به روزرسانی نمایش تنظیمات فعلی
        function updateCurrentConfig() {
            const config = pickers.advanced.config;
            const configDisplay = {
                size: config.size,
                primaryColor: config.colors.primary,
                secondaryColor: config.colors.secondary,
                animation: config.animation,
                duration: config.animationDuration + 'ms',
                yearRange: config.yearRange.min + ' - ' + config.yearRange.max
            };
            
            document.getElementById('current-config').textContent = JSON.stringify(configDisplay, null, 2);
        }

        // تست API
        function testAPI(method) {
            const resultsDiv = document.getElementById('api-results');
            let result = '';
            
            try {
                switch (method) {
                    case 'open':
                        pickers.api.open();
                        result = '✅ پیکر باز شد';
                        break;
                        
                    case 'close':
                        pickers.api.close();
                        result = '✅ پیکر بسته شد';
                        break;
                        
                    case 'setToday':
                        pickers.api.setToday();
                        result = '✅ تاریخ امروز تنظیم شد: ' + pickers.api.getSelectedDate().persian;
                        break;
                        
                    case 'setDate':
                        pickers.api.setDate(1403, 6, 15);
                        result = '✅ تاریخ تنظیم شد: ' + pickers.api.getSelectedDate().persian;
                        break;
                        
                    case 'getDate':
                        const selectedDate = pickers.api.getSelectedDate();
                        result = `✅ تاریخ انتخاب شده:\n${JSON.stringify(selectedDate, null, 2)}`;
                        break;
                        
                    case 'clear':
                        pickers.api.clearSelection();
                        result = '✅ انتخاب پاک شد';
                        break;
                        
                    case 'destroy':
                        pickers.api.destroy();
                        pickers.api = new ScrollingJalaliPicker('#api-picker');
                        result = '✅ پیکر حذف و مجدداً ایجاد شد';
                        break;
                        
                    default:
                        result = '❌ متد ناشناخته';
                }
            } catch (error) {
                result = '❌ خطا: ' + error.message;
            }
            
            const timestamp = new Date().toLocaleTimeString('fa-IR');
            resultsDiv.innerHTML += `<div style="border-bottom: 1px solid #eee; padding: 10px 0;">
                <strong>[${timestamp}]</strong> ${method}(): ${result}
            </div>`;
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }

        // تست عملکرد
        function runPerformanceTest() {
            const count = parseInt(document.getElementById('picker-count').value);
            const container = document.getElementById('performance-container');
            const logDiv = document.getElementById('performance-log');
            
            // پاک کردن کانتینر
            container.innerHTML = '';
            logDiv.innerHTML = '<div><strong>شروع تست عملکرد...</strong></div>';
            
            // ایجاد input ها
            for (let i = 0; i < count; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.id = `perf-picker-${i}`;
                input.placeholder = `Picker ${i + 1}`;
                input.style.cssText = 'width: 100%; margin-bottom: 5px; padding: 5px; font-size: 12px;';
                container.appendChild(input);
            }
            
            // شروع اندازه‌گیری
            const startTime = performance.now();
            const initialDOMCount = document.querySelectorAll('*').length;
            
            // ایجاد پیکرها
            const testPickers = [];
            for (let i = 0; i < count; i++) {
                testPickers.push(new ScrollingJalaliPicker(`#perf-picker-${i}`, {
                    size: 'small'
                }));
            }
            
            const endTime = performance.now();
            const finalDOMCount = document.querySelectorAll('*').length;
            
            // محاسبه نتایج
            const creationTime = endTime - startTime;
            const domIncrease = finalDOMCount - initialDOMCount;
            const estimatedMemory = (domIncrease * 0.5) + (count * 2); // تخمین کلی
            
            // نمایش نتایج
            updatePerformanceDisplay('creation-time', creationTime, 1000);
            updatePerformanceDisplay('memory-usage', estimatedMemory, 1000);
            updatePerformanceDisplay('dom-count', domIncrease, 500);
            
            logDiv.innerHTML += `
                <div>📊 تعداد پیکر: ${count}</div>
                <div>⏱️ زمان ایجاد: ${creationTime.toFixed(2)}ms</div>
                <div>🧠 تخمین مصرف حافظه: ${estimatedMemory.toFixed(1)}KB</div>
                <div>🌐 افزایش عناصر DOM: ${domIncrease}</div>
                <div>⚡ میانگین زمان هر پیکر: ${(creationTime / count).toFixed(2)}ms</div>
            `;
            
            // پاک کردن بعد از 10 ثانیه
            setTimeout(() => {
                testPickers.forEach(picker => picker.destroy());
                container.innerHTML = '<div style="text-align: center; color: #95a5a6;">تست کامل شد - پیکرهای آزمایشی حذف شدند</div>';
            }, 10000);
        }

        // به روزرسانی نمایش عملکرد
        function updatePerformanceDisplay(type, value, maxValue) {
            const percentage = Math.min((value / maxValue) * 100, 100);
            const fill = document.getElementById(`${type}-fill`);
            const text = document.getElementById(`${type}-text`);
            
            fill.style.width = percentage + '%';
            
            if (type === 'creation-time') {
                text.textContent = value.toFixed(2) + 'ms';
            } else if (type === 'memory-usage') {
                text.textContent = value.toFixed(1) + 'KB';
            } else {
                text.textContent = value.toString();
            }
        }

        // لاگ کنسول برای debugging
        console.log('🗓️ ScrollingJalaliPicker Test Page Loaded');
        console.log('Available pickers:', Object.keys(pickers));
    </script>
</body>
</html>
