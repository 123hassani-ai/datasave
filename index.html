<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø¯Ø±Ù† DataSave Ø¨Ø§ Ø§ÙÚ©Øª Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ">
    <meta name="author" content="DataSave Team">
    <title>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª - DataSave</title>
    
    <!-- ÙÙˆÙ†Øª ÙˆØ²ÛŒØ±Ù…ØªÙ† -->
    <link href="assets/fonts/vazirmatn.css" rel="stylesheet">
    
    <!-- Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù…ÛŒÙ†ÛŒÙ…Ø§Ù„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† -->
    <link rel="stylesheet" href="assets/fonts/minimal-icons.css">
    
    <!-- Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ú˜ÙˆÙ„Ø§Ø± -->
    <link href="assets/css/admin/variables.css" rel="stylesheet">
    <link href="assets/css/admin/header.css" rel="stylesheet">
    <link href="assets/css/admin/sidebar.css" rel="stylesheet">
    <link href="assets/css/admin/content.css" rel="stylesheet">
    <link href="assets/css/admin/modules/data-management.css" rel="stylesheet">

    
    <!-- Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ -->
    <style>
        /* Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ */
        body {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease-out;
        }
        
        body.loaded {
            visibility: visible;
            opacity: 1;
        }
        
        /* Ù„ÙˆØ¯ÛŒÙ†Ú¯ Ø§ÙˆÙ„ÛŒÙ‡ */
        .initial-loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-primary);
            display: flex;
            flex-direction:center;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }
        
        .initial-loading.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .loading-logo {
            width: 80px;
            height: 80px;
            background: var(--primary-gradient);
            border-radius: var(--radius-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            margin-bottom: var(--spacing-6);
            animation: pulse 2s ease-in-out infinite;
        }
        
        .loading-title {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-bold);
            color: var(--text-primary);
            margin-bottom: var(--spacing-3);
        }
        
        .loading-subtitle {
            font-size: var(--font-size-md);
            color: var(--text-secondary);
            margin-bottom: var(--spacing-6);
        }
        
        .loading-progress {
            width: 200px;
            height: 4px;
            background: var(--glass-bg);
            border-radius: var(--radius-full);
            overflow: hidden;
        }
        
        .loading-bar {
            height: 100%;
            background: var(--primary-gradient);
            border-radius: var(--radius-full);
            width: 0%;
            animation: loading 3s ease-in-out;
        }
        
        @keyframes loading {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }
        
        /* Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² backdrop-filter */
        @supports not (backdrop-filter: blur(10px)) {
            .glass-effect {
                background: rgba(255, 255, 255, 0.95) !important;
            }
            
            [data-theme="dark"] .glass-effect {
                background: rgba(15, 23, 42, 0.95) !important;
            }
        }
        
        /* Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ */
        * {
            will-change: auto;
        }
        
        .admin-header,
        .admin-sidebar,
        .admin-content {
            will-change: transform;
        }
    </style>
</head>
<body>
    <!-- Ù„ÙˆØ¯ÛŒÙ†Ú¯ Ø§ÙˆÙ„ÛŒÙ‡ -->
    <div class="initial-loading" id="initialLoading">
        <div class="loading-logo">
            <i class="fas fa-database"></i>
        </div>
        <h1 class="loading-title">DataSave</h1>
        <p class="loading-subtitle">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª...</p>
        <div class="loading-progress">
            <div class="loading-bar"></div>
        </div>
    </div>

    <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡ -->
    <!-- Ù‡Ø¯Ø±ØŒ Ø³Ø§ÛŒØ¯Ø¨Ø§Ø± Ùˆ Ù…Ø­ØªÙˆØ§ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙˆØ³Ø· JavaScript Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->

    <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ÙÙˆÙ†Øª Ø®ÙˆØ¯Ú©Ø§Ø± -->
    <script src="assets/js/modules/vazirmatn-auto.js"></script>
    
    <!-- Logger Ø³Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ persian-calendar.js -->
    <script>
        const Logger = {
            trace: (message) => {
                console.log('TRACE:', message);
                return () => {}; // exitTrace function
            },
            debug: (message, data) => console.log('DEBUG:', message, data),
            error: (message, error, data) => console.error('ERROR:', message, error, data)
        };
    </script>
    
    <!-- Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ -->
    <script src="assets/js/modules/numberUtils.js"></script>

    
    <!-- Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ - Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ES Modules -->
    <script type="module">
        import AdminMain from './assets/js/admin/admin-main.js';
        import RouterModule from './assets/js/admin/router.js';
        import ContentModule from './assets/js/admin/content.js';
        
        // Ø´Ø±ÙˆØ¹ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù¾Ø³ Ø§Ø² Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡
        window.addEventListener('DOMContentLoaded', () => {
            // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ Ù…Ú©Ø±Ø±
            if (window.adminMainInitialized) {
                return;
            }
            window.adminMainInitialized = true;
            
            // Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø³Ù†ØªÛŒ Ø±Ø§ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
            const headerScript = document.createElement('script');
            headerScript.src = 'assets/js/admin/header.js';
            document.head.appendChild(headerScript);
            
            const sidebarScript = document.createElement('script');
            sidebarScript.src = 'assets/js/admin/sidebar.js';
            document.head.appendChild(sidebarScript);
            
            // Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ø±Ø§ Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
            AdminMain.init();
        });
        
        // Ø§ØªØµØ§Ù„ Ø¨Ù‡ window Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø² Ú©Ø¯Ù‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ
        window.RouterModule = RouterModule;
    </script>
    
    <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§ØµÙ„ÛŒ -->
    <script>
        'use strict';
        
        /**
         * Ù…Ø¯ÛŒØ±ÛŒØª Ø§ØµÙ„ÛŒ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
         * Main Dashboard Manager
         */
        const DashboardManager = (function() {
            let modulesLoaded = {
                header: false,
                sidebar: false,
                content: false
            };
            
            /**
             * Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
             */
            function init() {
                console.log('ğŸš€ Starting DataSave Admin Dashboard...');
                
                // Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ø¯Ù† Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
                document.addEventListener('headerReady', () => {
                    modulesLoaded.header = true;
                    checkAllModulesLoaded();
                });
                
                document.addEventListener('sidebarReady', () => {
                    modulesLoaded.sidebar = true;
                    checkAllModulesLoaded();
                });
                
                document.addEventListener('DOMContentLoaded', () => {
                    modulesLoaded.content = true;
                    checkAllModulesLoaded();
                });
                
                // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡
                setupGlobalHandlers();
                setupKeyboardShortcuts();
                
                // Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ
                setTimeout(hideInitialLoading, 2000);
            }
            
            /**
             * Ø¨Ø±Ø±Ø³ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÙ…Ø§Ù… Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
             */
            function checkAllModulesLoaded() {
                const allLoaded = Object.values(modulesLoaded).every(loaded => loaded);
                
                if (allLoaded) {
                    finishLoading();
                }
            }
            
            /**
             * Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ
             */
            function finishLoading() {
                console.log('âœ… All modules loaded successfully!');
                
                // Ù†Ù…Ø§ÛŒØ´ body
                document.body.classList.add('loaded');
                
                // Ø­Ø°Ù Ù„ÙˆØ¯ÛŒÙ†Ú¯ Ø§ÙˆÙ„ÛŒÙ‡
                setTimeout(hideInitialLoading, 500);
                
                // Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù†Ù‡Ø§ÛŒÛŒ
                setupFinalConfiguration();
                
                console.log('ğŸ‰ DataSave Admin Dashboard is ready!');
            }
            
            /**
             * Ø­Ø°Ù Ù„ÙˆØ¯ÛŒÙ†Ú¯ Ø§ÙˆÙ„ÛŒÙ‡
             */
            function hideInitialLoading() {
                const loading = document.getElementById('initialLoading');
                if (loading) {
                    loading.classList.add('hidden');
                    setTimeout(() => {
                        loading.remove();
                    }, 500);
                }
            }
            
            /**
             * ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ú©Ù„ÛŒ
             */
            function setupGlobalHandlers() {
                // Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§ÛŒ JavaScript
                window.addEventListener('error', function(event) {
                    console.error('Global error:', event.error);
                });
                
                // Ù…Ø¯ÛŒØ±ÛŒØª ØªØºÛŒÛŒØ± Ø§Ù†Ø¯Ø§Ø²Ù‡ ØµÙØ­Ù‡
                let resizeTimeout;
                window.addEventListener('resize', function() {
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(() => {
                        handleResize();
                    }, 250);
                });
                
                // Ù…Ø¯ÛŒØ±ÛŒØª ØªØºÛŒÛŒØ± ÙÙˆÚ©ÙˆØ³ ØµÙØ­Ù‡
                document.addEventListener('visibilitychange', function() {
                    if (document.hidden) {
                        console.log('Dashboard hidden');
                    } else {
                        console.log('Dashboard visible');
                    }
                });
            }
            
            /**
             * Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ù…ÛŒØ§Ù†Ø¨Ø± Ú©Ù„ÛŒ
             */
            function setupKeyboardShortcuts() {
                document.addEventListener('keydown', function(event) {
                    // Ctrl/Cmd + K: Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¬Ø³ØªØ¬Ùˆ
                    if ((event.ctrlKey || event.metaKey) && event.key === 'k') {
                        event.preventDefault();
                        const searchInput = document.querySelector('.search-input');
                        if (searchInput) {
                            searchInput.focus();
                        }
                    }
                    
                    // Ctrl/Cmd + B: toggle Ø³Ø§ÛŒØ¯Ø¨Ø§Ø±
                    if ((event.ctrlKey || event.metaKey) && event.key === 'b') {
                        event.preventDefault();
                        if (window.HeaderModule) {
                            window.HeaderModule.toggle();
                        }
                    }
                    
                    // Ctrl/Cmd + D: Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
                    if ((event.ctrlKey || event.metaKey) && event.key === 'd') {
                        event.preventDefault();
                        if (window.SidebarModule) {
                            window.SidebarModule.setActiveMenu('dashboard');
                        }
                    }
                });
            }
            
            /**
             * Ù…Ø¯ÛŒØ±ÛŒØª ØªØºÛŒÛŒØ± Ø§Ù†Ø¯Ø§Ø²Ù‡
             */
            function handleResize() {
                const isMobile = window.innerWidth < 768;
                console.log('Resize detected, mobile:', isMobile);
                
                // Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ Ø¨Ù‡ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
                document.dispatchEvent(new CustomEvent('dashboardResize', {
                    detail: { 
                        isMobile: isMobile,
                        width: window.innerWidth,
                        height: window.innerHeight
                    }
                }));
            }
            
            /**
             * ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù†Ù‡Ø§ÛŒÛŒ
             */
            function setupFinalConfiguration() {
                // Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² backdrop-filter
                const supportsBackdrop = CSS.supports('backdrop-filter', 'blur(10px)');
                if (!supportsBackdrop) {
                    console.warn('âš ï¸ backdrop-filter not supported, using fallback');
                    document.body.classList.add('no-backdrop-filter');
                }
                
                // Ø¨Ø±Ø±Ø³ÛŒ Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ© Ø³ÛŒØ³ØªÙ…
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    console.log('ğŸŒ™ Dark mode detected');
                }
                
                // ØªÙ†Ø¸ÛŒÙ… Ù…ØªØ§ ØªÚ¯ theme-color
                const themeColor = getComputedStyle(document.documentElement)
                    .getPropertyValue('--primary-color').trim();
                
                let metaTheme = document.querySelector('meta[name="theme-color"]');
                if (!metaTheme) {
                    metaTheme = document.createElement('meta');
                    metaTheme.name = 'theme-color';
                    document.head.appendChild(metaTheme);
                }
                metaTheme.content = themeColor;
                
                // Ø«Ø¨Øª Service Worker (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
                if ('serviceWorker' in navigator) {
                    console.log('Service Worker supported');
                }
            }
            
            /**
             * Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª dashboard
             */
            function getInfo() {
                return {
                    version: '1.0.0',
                    modules: Object.keys(modulesLoaded),
                    loaded: Object.values(modulesLoaded).every(Boolean),
                    theme: document.documentElement.getAttribute('data-theme') || 'light',
                    rtl: document.dir === 'rtl'
                };
            }
            
            // API Ø¹Ù…ÙˆÙ…ÛŒ
            return {
                init: init,
                getInfo: getInfo
            };
        })();
        
        // Ø´Ø±ÙˆØ¹ Ø¨Ø±Ù†Ø§Ù…Ù‡
        DashboardManager.init();
        
        // Ø§ØªØµØ§Ù„ Ø¨Ù‡ window Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø±Ø§Ø³Ø±ÛŒ
        window.DashboardManager = DashboardManager;
        
        // Ù„Ø§Ú¯ Ø´Ø±ÙˆØ¹
        console.log('%cğŸš€ DataSave Admin Dashboard', 'color: #6366f1; font-size: 24px; font-weight: bold;');
        console.log('%cGlassmorphism Design System v1.0.0', 'color: #64748b; font-size: 14px;');
        console.log('%câœ¨ RTL Support â€¢ ğŸ“± Responsive â€¢ ğŸ¨ Modern UI', 'color: #10b981; font-size: 12px;');
    </script>
</body>
</html>